function pageResize(){document.body.clientWidth<=568&&mobile&&jQuery(".primary-nav > .block-views").height(window.innerHeight)}function resizeHeader(){document.body.clientWidth<=568&&mobile?(jQuery(".primary-nav > .block-views").height(window.innerHeight),jQuery("#page-wrapper").toggleClass("open")):(pageHeader=jQuery("#page-header"),pageHeader.hasClass("closed")?(oneAtATime=!0,pageHeader.removeClass("closed").find(".primary-nav").height(0).show(),headerHeight=pageHeader.find(".section-wrap").outerHeight(!0)+pageHeader.find(".primary-nav > .block").outerHeight(!0),navHeight=pageHeader.find(".primary-nav > .block").outerHeight(!0)):(oneAtATime=!1,headerHeight=pageHeader.find(".section-wrap").outerHeight(!0)-pageHeader.find(".primary-nav > .block").outerHeight(!0),navHeight=0,pageHeader.addClass("closed")),headerHeight>jQuery(window).height()&&(headerHeight=jQuery(window).height(),navHeight=jQuery(window).height()-pageHeader.find(".header-main").outerHeight(!0)),pageHeader.parent().animate({height:headerHeight},500,"easeInOutQuad"),pageHeader.find(".primary-nav").animate({height:navHeight},500,"easeInOutQuad",function(){jQuery(".touch #page-header .primary-nav").css("overflow","scroll")}))}function scrollableElement(e){for(var t=0,a=arguments.length;a>t;t++){var r=arguments[t],i=jQuery(r);if(i.scrollTop()>0)return r;i.scrollTop(1);var n=i.scrollTop()>0;if(i.scrollTop(0),n)return r}return[]}function readInChartCSV(){var e=jQuery;e.ajax({url:chartContainer.data("src"),type:"get",dataType:"text",success:function(t){var a=e.csv.toArrays(t);switch(e("#chart-data").html(t),chartContainer.data("charttype")){case"line":case"bar":case"column":genericChartParser(a,chartContainer);break;case"pie":pieChartParser(a,chartContainer);break;case"stock":stockChartParser(a,chartContainer)}},error:function(e){console.log(e.status+" "+e.statusText)}})}function convertDate(e){var t=e.split("/"),a=new Date(Date.UTC(t[2],t[0]-1,t[1]));return parseFloat(a.getTime()/1e3+"000")}function convertStringToID(e){return e.toLowerCase().replace(/\s+/g,"-")}function genericChartParser(e){for(var t=jQuery,a={},r=e[0],i=[],n=[],o=0,s=1;s<e.length;s++){n=[],i[o]={name:e[s][0]};for(var l=1;l<r.length;l++)n[l-1]=parseFloat(e[s][l]);i[o].data=n,o++}a.categories=r.slice(1),a.series=i,genericChartPlotter(a,chartContainer)}function genericChartPlotter(e){var t=chartContainer.data();chartContainer.highcharts({chart:{type:t.charttype},title:{text:t.title},subtitle:{text:t.subtitle},xAxis:{categories:e.categories},yAxis:{title:{text:t.yaxis}},tooltip:{enabled:t.showtooltip,valueSuffix:t.tooltipvalue},legend:{enabled:t.showlegend,layout:"vertical",align:"right",verticalAlign:"middle",borderWidth:0},plotOptions:{line:{dataLabels:{enabled:t.showdatalabels},enableMouseTracking:t.enablemousetracking},column:{stacking:t.stackvalues===!0?"normal":"",dataLabels:{enabled:t.showdatalabels,color:t.stackvalues===!0?"white":Highcharts.theme&&Highcharts.theme.dataLabelsColor},enableMouseTracking:t.enablemousetracking},bar:{stacking:t.stackvalues===!0?"normal":"",dataLabels:{enabled:t.showdatalabels,color:t.stackvalues===!0?"white":Highcharts.theme&&Highcharts.theme.dataLabelsColor},enableMouseTracking:t.enablemousetracking}},colors:highchartColors,series:e.series})}function pieChartParser(e){for(var t=jQuery,a=[],r=0;r<e.length;r++)a[r]=[e[r][0],parseFloat(e[r][1])];pieChartPlotter(a,chartContainer)}function pieChartPlotter(e){var t=chartContainer.data();chartContainer.highcharts({chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1},title:{text:t.title},subtitle:{text:t.subtitle},tooltip:{enabled:t.showtooltip,pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>"},plotOptions:{pie:{allowPointSelect:t.enablesliceclick,cursor:"pointer",dataLabels:{enabled:t.showdatalabels,color:"#000000",connectorColor:"#000000",format:"<b>{point.name}</b>: {point.percentage:.1f} %"},showInLegend:t.showlegend}},series:[{type:"pie",data:e}]})}function stockChartParser(e){for(var t=jQuery,a=e[0],r=[],i=[],n=0,o=1;o<e.length;o++){i=[],r[n]={name:e[o][0],id:e[o][0].toLowerCase().replace(/\s+/g,"-")};for(var s=1;s<a.length;s++)i[s-1]=[convertDate(a[s]),parseFloat(e[o][s])];r[n].data=i,n++}t("#flags").length&&(flags=JSON.parse("["+t("#flags").html()+"]"),t.each(flags,function(e,a){a.onSeries=convertStringToID(a.onSeries),t.each(flags[e].data,function(e,t){t.x=parseInt(t.x+"000")})}),r=r.concat(flags)),stockChartPlotter(r,chartContainer)}function stockChartPlotter(e){var t=chartContainer.data();chartContainer.highcharts("StockChart",{title:{text:t.title},subtitle:{text:t.subtitle},rangeSelector:{selected:5},tooltip:{valueDecimals:2},series:e})}function loadGallery(){var e=jQuery,t=galleryContainer.data(),a=e(".bxslider").bxSlider({mode:t.transitionmode,captions:t.showcaptions,auto:t.autoplay,controls:t.showcontrols,autoHover:t.pauseonhover,pause:t.transitiondelay,adaptiveHeight:t.adaptiveheight,autoControls:t.showplaypause,autoControlsCombine:!0,onSliderLoad:function(){console.log("loaded")}});return a}var mobile=IsMobile.detect();jQuery("html").addClass(mobile?"mobile":"desktop"),jQuery(document).ready(function(e){jQuery("#edit-cas-login-redirection-message").appendTo("form#user-login-form"),jQuery("div.form-item-cas-identifier").appendTo("form#user-login-form"),jQuery("#edit-cas-identifier").change(function(){jQuery(this).is(":checked")?(jQuery("#user-login-form .form-item-name").fadeOut(250),jQuery("#user-login-form .form-item-pass").fadeOut(250)):(jQuery("#user-login-form .form-item-name").fadeIn(250),jQuery("#user-login-form .form-item-pass").fadeIn(250))}),console.info(jQuery("div.show-sponsor").text()),"0"==jQuery("div.show-sponsor").text()&&jQuery("div.sponsor").hide()}),jQuery(window).bind("resize orientationchange",pageResize);var headerHeight,navHeight,pageHeader;jQuery(".primary-nav .view-book-outline a").bind("click touch",function(e){e.stopPropagation()}),jQuery(".toolbar #page-header").waypoint("sticky",{offset:function(){return jQuery("#toolbar").height()}}),jQuery("#page-header").not(".toolbar #page-header").waypoint("sticky");var oneAtATime=!0;jQuery(".node-type-book #main-content").waypoint(function(e){if("down"===e&&oneAtATime){oneAtATime=!1,resizeHeader(),jQuery(".node-type-book #main-content").waypoint("disable");var t=window.setTimeout(function(){jQuery(".node-type-book #main-content").waypoint("enable")},200)}"up"!==e||oneAtATime||(oneAtATime=!0,resizeHeader(),jQuery(scrollElem).animate({scrollTop:0},500,"easeInOutQuad",function(){jQuery("#page-header").removeClass("overlay")}))},{offset:function(){return jQuery("#page-header .section-wrap").outerHeight(!0)-2+jQuery("#toolbar").height()}}),document.body.clientWidth<=568&&mobile&&(jQuery("body").addClass("phone"),jQuery("#page-header .primary-nav").prependTo(jQuery("#page-wrapper")),jQuery(".node-type-book #main-content").waypoint("disable")),jQuery("#page-header .primary-nav").height(jQuery("#page-header .primary-nav > .block").outerHeight(!0)),jQuery("#page-header").parent().height(jQuery("#page-header .section-wrap").outerHeight(!0)),jQuery("#page-header").not(".node-type-book  #page-header").addClass("overlay").addClass("closed"),jQuery(".logged-in #page-header, .logged-in .primary-nav").bind("touch click",function(){resizeHeader()}),jQuery("#page-header .section-wrap").append('<i class="icon-remove"></i>'),jQuery("#page-header .icon-cancel").bind("touch click",function(){resizeHeader()}),jQuery(".user-login #edit-name").attr("placeholder","Username"),jQuery(".user-login #edit-pass").attr("placeholder","Password"),jQuery(".user-login #edit-submit").remove(),jQuery(".user-login #edit-actions").append('<button type="submit" id="edit-submit" class="form-submit" name="op">Login</button>');var adminSticky=window.setTimeout(function(){jQuery(".toolbar #page-header").css("top",jQuery("body.toolbar").css("padding-top"))},200),scrollElem=scrollableElement("html","body");jQuery(".scrolltoTop").click(function(e){e.preventDefault(),jQuery(scrollElem).animate({scrollTop:0},400)}),function(e){e(".case-title .view-content a").each(function(){e(this).prependTo(e(this).parentsUntil(".case-menu").parent().find(".stem_class").first()).wrap('<li class="case-title"/>')}),e(".case-tiles .tile").each(function(){var t=e(this);""==t.find("img").attr("src")&&t.addClass("no-img"),t.hasClass("small")&&""==t.find("img").attr("src")?e(this).find("img").attr("src","/sites/all/themes/ysm_cases/_assets/images/blank-s.gif"):t.hasClass("medium")&&""==t.find("img").attr("src")?e(this).find("img").attr("src","/sites/all/themes/ysm_cases/_assets/images/blank-m.gif"):t.hasClass("large")&&""==t.find("img").attr("src")?e(this).find("img").attr("src","/sites/all/themes/ysm_cases/_assets/images/blank-l.gif"):t.hasClass("xlarge")&&""==t.find("img").attr("src")&&e(this).find("img").attr("src","/sites/all/themes/ysm_cases/_assets/images/blank-xl.gif")}),e(".document-tiles .tile").each(function(){var t=e(this);""==t.find("img").attr("src")&&t.addClass("no-img").find("img").attr("src","/sites/all/themes/ysm_cases/_assets/images/blank-sq.gif")}),e(".case-tiles .tile.no-img").each(function(){e(this).find("i").each(function(){console.info(e(this).attr("class")),""==e(this).attr("class")&&e(this).closest("div.tile.no-img").addClass("no-icon")})}),e(".document-tiles").each(function(){var t=e(this);t.addClass("processed"),1==t.find(".view-content").children().length?t.addClass("one-sixth"):2==t.find(".view-content").children().length?t.addClass("one-third"):t.find(".view-content").children().length>2&&t.addClass("one-half")}),e("img:not(.loaded)").each(function(){e(this).addClass("loaded").removeAttr("width").removeAttr("height").css({height:"",width:""})}),e(".mediacore-video-container iframe").unwrap()}(jQuery);var highchartColors=["#00457c","#c9b579","#3775a4","#bf6f6f","#42889b","#b242ae","#79ba86","#5d94be","#eee256"],chartContainer="";jQuery(document).ready(function(e){e(".view-document-grid").find(".tile").each(function(){e(this).find("a").click(function(t){t.preventDefault();var a=e(this).attr("href"),r,i,n;if("-1"==a.indexOf(location.host)||a.indexOf("files")>0)window.open(a);else{if(e(this).hasClass("in-use"))return!1;r=e("#template").clone(),uid=Math.floor(100*Math.random())+1,i="tile-"+uid,buttonID="button-"+uid,e(this).attr("id",buttonID),e(this).attr("class","in-use"),r.attr("id",i),e("#main-content").prepend(r),setTimeout(function(){e("#"+i).addClass("open")},500),e("#"+i+" .tile-target").load(a+" .tile-content",function(t,a,r){if("success"==a){switch(n=e("#"+e("#"+i).find(".tile-content").attr("id")),e("html, body").animate({scrollTop:e("#"+i).offset().top+e("#page-header").height},1e3),e("#"+i).find(".tile-content").attr("class").split(" ")[0]){case"chart-container":chartContainer=e("#"+e(this).find(".chart-target").attr("id")),readInChartCSV();break;case"gallery-container":galleryContainer=n,mySlider=loadGallery();break;case"mediacore-video-container":e("#"+i).find("iframe").unwrap();break;case"sheetnode-container":var o=n.data("nid"),s={},l=n.find("#sheetnode-value").html();s["sheetnode-"+o]={aliases:["sheetnode"],containerElement:"sheetnode-"+o,context:{"entity-name":"node",oid:'"'+o+'"'},imagePrefix:"/sites/all/modules/sheetnode/socialcalc/images/sc-",permissions:{"edit sheetnode settings":!0},saveElement:!1,showToolbar:0,value:l,viewMode:"2"},Drupal.settings.sheetnode=s,Drupal.behaviors.sheetnode.attach("#sn-container-"+o,Drupal.settings)}e("#"+i+" .tile-wrapper").css("background","none")}})}})}),e(document).on("click",".modal-close",function(t){t.preventDefault(),e("#button-"+e(this).closest(".modal").attr("id").split("-")[1]).removeClass("in-use"),e(this).closest(".modal").remove()})});var galleryContainer;jQuery(document).ready(function(e){e("img.has-caption").each(function(){var t=e(this),a="figure";void 0!=t.css("float")&&(a+=" figure-"+t.css("float"));var r="width: "+t.width()+"px",i="<figure class='"+a+"' style='"+r+"'></figure>";t.wrap(i);var n="<figcaption>"+t.attr("alt")+"</figcaption>";t.parent("figure").append(n)})}),jQuery(document).ready(function(e){e("html.lt-ie9").length>0&&e.get("/sites/all/themes/ysm_cases/_assets/partials/browser-detect.html",function(t){e("article.main-content").prepend(t)})});